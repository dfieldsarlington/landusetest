<!DOCTYPE html>
<meta charset="utf-8">
<html>
<head>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="http://dimplejs.org/dist/dimple.v2.1.6.min.js"></script>
<style>
#chartContainer {    
	float: left;
	top:10px;
	left:10px;
	width:100%;
	height: 450px;
	background-color: rgb(252,245,223);
}
.textclasshead {
  float: center;
  font: 18px Arial,Helvetica,sans-serif;
  text-align: center;
  color: #545454;
  }
  .textclass {
  float: left;
  font: 12/18px Arial,Helvetica,sans-serif;
  color: #545454;
  }
</style>
</head>
<body bgcolor="#FCF5DF";>
<div class="textclasshead">Discrepancies in Land Use and Zoning</div><br>
<div class="textclass">The chart shown here depicts the number of properties in commercial and industrial zones that have a land use other than what the property is zoned for. Total acreage of these discrepancies is shown by zone.</dvi> 
<div id="chartContainer"></div>
<div class="textclass"; width="100%"; height="400px";>Information reported in the assessor’s database shows that 20 percent of land in Arlington's business districts is used for residential purposes, including single-family homes and apartment units. Arlington allows multifamily housing by special permit in most of the business districts, and some of the apartments and townhouses located on business zoned land came about because of this provision.<br> Similarly, much of Arlington’s industrially zoned land is no longer used for industrial purposes. While the town has zoned about 49 acres for industrial development, a comparison of the zoning map and assessor’s records shows that only fourteen acres (about 29 percent) of the Industrial District is actually used for manufacturing, warehouse/distribution, storage, and other industrial types of activity. The belief that commercial and industrial properties have been rezoned as residential is a common misperception in Arlington.</div>
<script type="text/javascript">
    var svg = dimple.newSvg("#chartContainer", "100%", "100%");
    d3.csv("https://raw.githubusercontent.com/dfieldsarlington/landuse/gh-pages/landuse_noncompliance_2014.csv", function (data) {
     var myChart = new dimple.chart(svg, data);
        myChart.setBounds("15%", "5%", "50%", "80%")
        myChart.addMeasureAxis("x", "Acres");
        myChart.addMeasureAxis("y", "# of Properties");
        myChart.addSeries("Zone", dimple.plot.bubble);
		myChart.assignColor("B1", "#FFBEBE");
		myChart.assignColor("B2A","#FF0000");
		myChart.assignColor("I","#A900E6");
        var LineLegend = myChart.addLegend ("70%", "10%", "10%", "90%", "right");
	  LineLegend.fontSize = "auto";
		var LineStoryboard = myChart.setStoryboard("Zone");
		LineStoryboard.categoryFields = [null];
		myChart.draw();
		LineStoryboard.storyLabel.remove();
        myChart.legends = [];
        var filterValues = dimple.getUniqueValues(data, "Zone");
        LineLegend.shapes.selectAll("rect")
          .on("click", function (e) {
            var hide = false;
            var newFilters = [];
            filterValues.forEach(function (f) {
              if (f === e.aggField.slice(-1)[0]) {
                hide = true;
              } else {
                newFilters.push(f);
              }
            });
            if (hide) {
              d3.select(this).style("opacity", 0.2);
            } else {
              newFilters.push(e.aggField.slice(-1)[0]);
              d3.select(this).style("opacity", 0.8);
            }
            filterValues = newFilters;
            myChart.data = dimple.filterData(data, "Zone", filterValues);
			d3.selectAll("circle").style("stroke-width", 4);
            myChart.draw(800);
			
          });
		  
      });
  </script>
  </body>
  </html>